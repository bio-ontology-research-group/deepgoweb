{% extends "deepgo/base.html" %}
{% load widget_tweaks %}

{% block content %}

<div class="row">
  <div class="col-md-12">
    <h1>DeepGO Protein Function prediction.</h1> <br/>
    <p>DeepGO is a novel method for predicting protein functions using
      protein sequences and protein-protein interaction (PPI) networks.
      It uses deep neural networks to learn sequence features and PPI
      embeddings learned with knowledge graph representation learning
      method and hierarchically classifies proteins with GO classes.
    </p>
    <p>The tool only needs protein sequence as an input. It takes network
    embeddings of the most similar sequence in our database found
    using BLAST search. The source code of the model is available on
      <a href="https://github.com/bio-ontology-research-group/deepgo">
	GitHub repository</a>
    </p>
    <br/>
  </div>
</div>
<div class="row">
  <div class="col-md-12">
    Examples:
    <ul>
      <li><a class="prot_link" id="P80386" href="#">AAKB1 (P80386) - FASTA</a></li>
      <li><a class="prot_link" id="Q14738" href="#">PPP2R5D (Q14738) - Raw sequence</a></li>
    </ul>

    <p id="P80386_seq" class="deepgo-sequence" data-format="fasta">>sp|P80386|AAKB1_RAT 5'-AMP-activated protein kinase subunit beta-1 OS=Rattus norvegicus GN=Prkab1 PE=1 SV=4
MGNTSSERAALERQAGHKTPRRDSSGGTKDGDRPKILMDSPEDADIFHTEEMKAPEKEEF
LAWQHDLEVNEKAPAQARPTVFRWTGGGKEVYLSGSFNNWSKLPLTRSQNNFVAILDLPE
GEHQYKFFVDGQWTHDPSEPIVTSQLGTVNNIIQVKKTDFEVFDALMVDSQKCSDVSELS
SSPPGPYHQEPYISKPEERFKAPPILPPHLLQVILNKDTGISCDPALLPEPNHVMLNHLY
ALSIKDGVMVLSATHRYKKKYVTTLLYKPI</p>
    <br/>

    <p id="Q14738_seq" class="deepgo-sequence" data-format="enter">MPYKLKKEKEPPKVAKCTAKPSSSGKDGGGENTEEAQPQPQPQPQPQAQSQPPSSNKRPSNSTPPPTQLSKIKYSGGPQIVKKERRQSSSRFNLSKNRELQKLPALKDSPTQEREELFIQKLRQCCVLFDFVSDPLSDLKFKEVKRAGLNEMVEYITHSRDVVTEAIYPEAVTMFSVNLFRTLPPSSNPTGAEFDPEEDEPTLEAAWPHLQLVYEFFLRFLESPDFQPNIAKKYIDQKFVLALLDLFDSEDPRERDFLKTILHRIYGKFLGLRAYIRRQINHIFYRFIYETEHHNGIAELLEILGSIINGFALPLKEEHKMFLIRVLLPLHKVKSLSVYHPQLAYCVVQFLEKESSLTEPVIVGLLKFWPKTHSPKEVMFLNELEEILDVIEPSEFSKVMEPLFRQLAKCVSSPHFQVAERALYYWNNEYIMSLISDNAARVLPIMFPALYRNSKSHWNKTIHGLIYNALKLFMEMNQKLFDDCTQQYKAEKQKGRFRMKEREEMWQKIEELARLNPQYPMFRAPPPLPPVYSMETETPTAEDIQLLKRTVETEAVQMLKDIKKEKVLLRRKSELPQDVYTIKALEAHKRAEEFLTASQEAL</p>
</div>
<div class="row">
  <div class="col-md-12">
    <form class="form" method="post">
      {% csrf_token %}
      {% for field in form %}
      <div class="form-group {% if field.errors %}has-error{% endif %}">
        {% render_field field class+="form-control" placeholder=field.label %}
        {{ field.errors }}
      </div>
      {% endfor %}
      <button type="submit" class="btn btn-primary">Submit</button>
    </form>
  </div>
</div>


{% endblock %}

{% block scripts %}
<script type="text/javascript">
  $(function() {
    $('.prot_link').click(function(e) {
      e.preventDefault();
      var prot_id = e.currentTarget.id + '_seq';
      var format = $('#' + prot_id).data().format;
      var sequence = $('#' + prot_id).text();
      console.log(format);
      $('#id_data').text(sequence);
      $('#id_data_format option[value=' + format + ']').prop('selected', true);
    });
  });
</script>
{% endblock %}
